
<div class="ui row candidate">

<div class="one wide column">
    {{#if email}}
        {{#unless emailLast30}}
            {{#unless statusCurrent}}
                {{#unless clientProfile}}
                    <div class="center-vertical-wrap">
                        <div class="center-vertical">
                            <div class="ui checkbox">
                                <input type="checkbox" name="email" value='{"email": "{{this.email}}", "id":"{{this.id}}", "fn":"{{this.firstName}}"}'>
                                <label></label>
                            </div>
                        </div>
                    </div>
                {{/unless}}
            {{/unless}}
        {{/unless}}
    {{/if}}
</div>

<div class="column two wide picture">
    <div class="center-vertical-wrap">
        <div class="center-vertical">
            <a href="/candidate/{{id}}">
                <img class="ui small circular image color {{stageToCss idStage}}" src="{{picture}}" onerror="this.src='/assets/img/client-logo.png'"/>
            </a>
        </div>
    </div>
</div>


<div class="four wide column">
    <p><b>{{fullname}}</b></p>
    <p>{{headline}}</p>
    <p><b>{{current}}</b></p>
    <p>{{location}}</p>
</div>

<div class="two wide column candidate-details {{stageToCss idStage}}">
    <p class="{{presenceToCss cvDocumentLink}}">CV</p>
    <p class="{{presenceToCss contacts.email}}">Email</p>
    <p class="{{presenceToCss contacts.phone}}">Phone</p>
    <!--
    <p class="{{presenceToCss salary}}">Salary</p>
    -->
</div>

<div class="two wide column candidate-details {{stageToCss idStage}}">
    <p class="{{presenceToCss cvDocumentLink}}">
        {{#if cvDocumentLink}}
            <i class="checkmark icon"></i>
        {{else}}
            <i class="remove icon"></i>
        {{/if}}
    </p>
    <p class="{{presenceToCss contacts.email}}">
        {{#if contacts.email}}
            <i class="checkmark icon"></i>
        {{else}}
            <i class="remove icon"></i>
        {{/if}}
    </p>
    <p class="{{presenceToCss contacts.phone}}">
        {{#if contacts.phone}}
            <i class="checkmark icon"></i>
        {{else}}
            <i class="remove icon"></i>
        {{/if}}
    </p>
    <p class="{{presenceToCss salary}}">
        {{#if info.sexpected}}
            <i class="checkmark icon"></i>
        {{else}}
            <i class="remove icon"></i>
        {{/if}}
    </p>
</div>

<div class="five wide column candidate-status">
    
    <p>
    Connected To:
    {{# if connectedTo.length }}
    {{#each connectedTo}}
            {{#if this}}
                <a href="/connected/{{encodeKeywordsHelper this}}"><b>{{initials_of_connected_users this}}</b></a>
            {{/if}}
    {{/each}}
    {{else}}
        N/A
    {{/if}}
    </p>

    <p class="stages">Status:
    {{#if statusCurrent.length}}
        {{#each statusCurrent}}
            {{generateStatus this ../clients ../stages}}<span class="comma">,</span>
        {{/each}}
    {{/if}}
    {{#if clientProfile}}
        <span class="client-employee">Client Employee</span>
    {{/if}}
    {{#unless clientProfile}}
        {{#unless statusCurrent.length}}
            N/A
        {{/unless}}
    {{/unless}}
    </p>


    <!-- @TODO get some more details here -->
    <p class="email-preview">Last Contacted:
        {{#if lastEmail.sentAt}}

        <a class="ui" href="" id="email-id-{{id}}" data-content="{{lastEmail.subject}}, {{lastEmail.senderName}}"> {{lastEmail.sentAt}}</a>

        {{else}}
            N/A
        {{/if}}

    </p>

    <p class="last-viewed-by">
    Last Viewed By: 
    {{#if viewedBy.length}}
        {{#each (lastViewedBy viewedBy) }}

            <a class="ui" href="" data-content="{{user.fullname}} ({{timestamp_formatted_long}})" id="viewed-by-{{../id}}">
            {{#unless @index}}
                {{user.initials}} ({{timestamp_formatted_short}})
            {{/unless}}
            </a>

        {{/each}}

    {{else}}
        N/A
    {{/if}}
    </p>

</div>

<!-- modals -->

{{#if viewedBy.length}}
    <div class="ui modal email viewed-by-{{id}}">
        <i class="close icon"></i>
        <div class="header">
            Viewed By
        </div>
        <div class="content">
            {{#each (lastViewedBy viewedBy) }}
                <p>{{user.fullname}} ({{timestamp_formatted_long}})</p>
            {{/each}}
        </div>
        <div class="actions"> <!-- if any actions put them here --> </div>
    </div>
{{/if}}

{{#if lastEmail.sentAt}}
    <div class="ui modal email email-id-{{id}}">
        <i class="close icon"></i>
        <div class="header">
            {{lastEmail.subject}}
        </div>
        <div class="content">
            <p class="message">{{lastEmail.message}}</p>
            <p class="sender">{{lastEmail.senderName}}</p>
            <p class="sent-at">{{lastEmail.sentAt}}</p>
        </div>
        <div class="actions"> <!-- if any actions put them here --> </div>
    </div>
{{/if}}

</div>

<div class="six column row skills black">

    {{#if listSkills.length}}
        {{#each listSkills}}
            <div class="column
            {{#if matched}}
            matched
            {{/if}}
            ">
                <div class="center-vertical-wrap">
                    <div class="center-vertical">
                        <p> {{skill}} </p>
                    </div>
                </div>
            </div>
        {{/each}}
    {{else}}
        <!-- to keep the bar always the same size -->
        <div class="column">
            <p style="opacity:0">nth</p>
        </div>
    {{/if}}

</div>


    <!-- hide it for now, I don't think it's a valuable information to display anyway -->
    <!--
    <aside class="aside aside-2">
        {{#if percentageMatch}}
            <div class="pie">{{percentageMatch}}%</div>
        {{/if}}
    </aside>
    -->


